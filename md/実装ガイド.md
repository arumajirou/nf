# AI開発チーム 実装ガイド

## クイックスタート（15分で開始）

### Step 1: Claude Code のセットアップ（5分）

```bash
# インストール
npm install -g @anthropic-ai/claude-code

# プロジェクトディレクトリに移動
cd your-project

# 初回起動（ログイン）
claude

# ログイン完了後、動作確認
# → プロンプトに「このプロジェクトの構造を教えて」と入力
```

**動作確認のポイント:**
- Claude Code がプロジェクト構造を理解できているか
- ファイルの読み取りができるか
- Git 操作が可能か

### Step 2: 3つのGPTsを作成（5分）

1. **ChatGPT にアクセス**
   - https://chat.openai.com/gpts/editor にアクセス

2. **GPT A（プロジェクトオーケストレーター）を作成**
   ```
   Name: [プロジェクト名] - プロジェクトオーケストレーター
   Description: AI開発チームと人間管理者の橋渡し
   Instructions: [GPT_A_プロジェクトオーケストレーター.md の内容をコピー]
   ```

3. **GPT B（Claude Code マネージャー）を作成**
   ```
   Name: [プロジェクト名] - Claude Code マネージャー
   Description: Claude Code への最適な指示を生成
   Instructions: [GPT_B_Claude_Code_マネージャー.md の内容をコピー]
   ```

4. **GPT C（品質保証エージェント）を作成**
   ```
   Name: [プロジェクト名] - 品質保証エージェント
   Description: コード品質の自動評価
   Instructions: [GPT_C_品質保証エージェント.md の内容をコピー]
   ```

### Step 3: 初回タスクの実行（5分）

**GPT A（オーケストレーター）に相談:**
```
「新しいプロジェクトを始めます。以下の情報を基に、
最初のタスクを提案してください。

プロジェクト: [名前]
目的: [説明]
現在の状況: [進捗]
技術スタック: [使用技術]」
```

**GPT B（Claude Code マネージャー）に指示を生成依頼:**
```
「[GPT Aが提案したタスク]を実装したいです。
Claude Code への最適なプロンプトを生成してください。」
```

**生成されたプロンプトを Claude Code に実行:**
```bash
# ターミナルで Claude Code を起動
claude

# 生成されたプロンプトを貼り付けて実行
```

**GPT C（品質保証）で評価:**
```
「Claude Code が以下の変更を実施しました:
[Git diff または変更内容]

品質評価を実行してください。」
```

---

## 詳細実装ガイド

### フェーズ1: 基盤構築（Week 1）

#### Day 1: 環境準備

**タスク一覧:**
- [ ] Claude Code インストール
- [ ] Git リポジトリの整備
- [ ] 3つのGPTsの作成
- [ ] 通知設定（Slack/Email）

**Slackボット設定（オプション）:**
```javascript
// Slack Webhook URL を取得
// https://api.slack.com/messaging/webhooks

// 簡易通知スクリプト
// notify.js
const axios = require('axios');

async function notify(message) {
  await axios.post(process.env.SLACK_WEBHOOK_URL, {
    text: message
  });
}

module.exports = { notify };
```

#### Day 2-3: ワークフロー設計

**ドキュメント作成:**
1. **プロジェクト概要書**
   ```markdown
   # プロジェクト: [名前]
   
   ## 目的
   [何を作るか]
   
   ## 主要機能
   1. [機能1]
   2. [機能2]
   
   ## 技術スタック
   - Frontend: [技術]
   - Backend: [技術]
   - Database: [技術]
   - Infra: [技術]
   
   ## 品質基準
   - テストカバレッジ: ≥80%
   - 複雑度: ≤10
   - セキュリティ: Critical 0件
   ```

2. **タスク優先度マトリクス**
   ```markdown
   # タスク優先度定義
   
   ## 優先度A（即実行）
   - ビジネスクリティカル機能
   - セキュリティ問題
   - 本番環境の障害
   
   ## 優先度B（計画実行）
   - 重要な新機能
   - パフォーマンス改善
   - 技術的負債の返済
   
   ## 優先度C（後回し可）
   - UI/UXの微調整
   - ドキュメント改善
   - リファクタリング
   ```

3. **判断基準書**
   ```markdown
   # 自動実行 vs 人間判断の基準
   
   ## 自動実行可能
   - lint 修正
   - テスト追加
   - ドキュメント更新
   - 既知のバグ修正
   
   ## 人間判断必須
   - ビジネス要件の解釈
   - アーキテクチャ変更
   - セキュリティリスク
   - 予算への影響
   ```

#### Day 4-5: 自動化スクリプト作成

**日次レポート生成スクリプト:**
```javascript
// daily-report.js
const { exec } = require('child_process');
const { promisify } = require('util');
const execAsync = promisify(exec);

async function generateDailyReport() {
  // Git コミット履歴取得
  const { stdout: commits } = await execAsync(
    'git log --since="1 day ago" --pretty=format:"%h - %s"'
  );
  
  // テスト結果取得
  const { stdout: testResult } = await execAsync('npm test');
  
  // カバレッジ取得
  const { stdout: coverage } = await execAsync('npm run test:coverage');
  
  // レポート作成
  const report = `
# 日次進捗レポート - ${new Date().toLocaleDateString('ja-JP')}

## 本日のコミット
${commits}

## テスト結果
${testResult.includes('PASS') ? '✅ All Tests Passed' : '❌ Some Tests Failed'}

## カバレッジ
${extractCoverage(coverage)}

---
Generated at ${new Date().toLocaleString('ja-JP')}
  `;
  
  return report;
}

function extractCoverage(coverageOutput) {
  // カバレッジ率を抽出
  const match = coverageOutput.match(/All files\s+\|\s+([\d.]+)/);
  return match ? `${match[1]}%` : 'N/A';
}

// GPT A に送信
async function sendToOrchestrator(report) {
  // OpenAI API または ChatGPT API を使用
  // ここではプレースホルダー
  console.log('Sending report to Orchestrator GPT...');
  console.log(report);
}

// 実行
generateDailyReport()
  .then(sendToOrchestrator)
  .catch(console.error);
```

**定時実行設定（cron）:**
```bash
# crontab -e で編集

# 毎日0時にレポート生成
0 0 * * * cd /path/to/project && node daily-report.js

# 毎日9時に人間に通知
0 9 * * * cd /path/to/project && node notify-human.js
```

#### Day 6-7: テスト運用

**小規模タスクで試験:**
1. 簡単なバグ修正
2. ドキュメント更新
3. テスト追加

**評価項目:**
- GPTsの指示は適切か
- Claude Code の実行結果は期待通りか
- 品質評価は正確か
- 通知は届いているか

---

### フェーズ2: 自動化拡大（Week 2-3）

#### 複数Claude Code インスタンスの設定

**Git Worktrees セットアップ:**
```bash
# メインプロジェクト
cd /path/to/project

# Worktree 作成
git worktree add ../project-feature-a feature/user-auth
git worktree add ../project-bugfix fix/issue-123
git worktree add ../project-test test/coverage-improvement

# 各ディレクトリで Claude Code 起動
# Terminal 1
cd ../project-feature-a
claude

# Terminal 2
cd ../project-bugfix
claude

# Terminal 3
cd ../project-test
claude
```

**並列実行管理スクリプト:**
```bash
#!/bin/bash
# parallel-claude.sh

# Claude Code を複数起動
tmux new-session -d -s claude1 "cd ../project-feature-a && claude"
tmux new-session -d -s claude2 "cd ../project-bugfix && claude"
tmux new-session -d -s claude3 "cd ../project-test && claude"

echo "3 Claude Code instances started"
echo "Attach with: tmux attach -t claude1"
```

#### CI/CD パイプライン統合

**GitHub Actions 設定例:**
```yaml
# .github/workflows/quality-check.yml
name: Quality Check

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  quality:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Setup Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'
    
    - name: Install dependencies
      run: npm ci
    
    - name: Lint
      run: npm run lint
    
    - name: Test
      run: npm test
    
    - name: Coverage
      run: npm run test:coverage
    
    - name: Security Scan
      run: npm audit
    
    - name: Generate Quality Report
      run: node scripts/quality-report.js
    
    - name: Notify Orchestrator
      env:
        OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}
      run: node scripts/notify-gpt.js
```

#### 自動品質チェック

**品質チェックスクリプト:**
```javascript
// scripts/quality-report.js
const fs = require('fs');
const { exec } = require('child_process');

async function runQualityChecks() {
  const results = {
    timestamp: new Date().toISOString(),
    checks: {}
  };
  
  // Lint
  results.checks.lint = await runCommand('npm run lint');
  
  // Tests
  results.checks.tests = await runCommand('npm test');
  
  // Coverage
  const coverage = await runCommand('npm run test:coverage');
  results.checks.coverage = extractCoverage(coverage);
  
  // Security
  results.checks.security = await runCommand('npm audit');
  
  // Complexity (SonarQubeなど)
  // results.checks.complexity = await runSonarAnalysis();
  
  // レポート生成
  const report = generateReport(results);
  
  // ファイル保存
  fs.writeFileSync('quality-report.json', JSON.stringify(results, null, 2));
  
  // GPT C（品質保証エージェント）に送信
  await sendToQualityGPT(report);
  
  // 判定
  const decision = makeDecision(results);
  console.log(`Decision: ${decision}`);
  
  if (decision === 'REJECT') {
    process.exit(1); // CI を失敗させる
  }
}

function makeDecision(results) {
  // 必須基準チェック
  if (results.checks.lint.errors > 0) return 'REJECT';
  if (!results.checks.tests.allPassed) return 'REJECT';
  if (results.checks.coverage.percentage < 80) return 'REJECT';
  if (results.checks.security.criticalVulnerabilities > 0) return 'REJECT';
  
  // 警告レベル
  if (results.checks.security.vulnerabilities > 5) return 'REVIEW_REQUIRED';
  
  return 'APPROVE';
}

runQualityChecks().catch(console.error);
```

---

### フェーズ3: 完全自動化（Week 4）

#### 自動実行ワークフロー

**完全自動PDCAサイクル:**

```javascript
// auto-pdca.js - 完全自動化のメインスクリプト

const schedule = require('node-schedule');

// 毎日0時: 前日サマリー
schedule.scheduleJob('0 0 * * *', async () => {
  const summary = await generateDailySummary();
  await sendToSlack(summary);
  await saveToNotion(summary);
});

// 毎日1時: 次日計画
schedule.scheduleJob('0 1 * * *', async () => {
  // GPT A（オーケストレーター）に計画立案を依頼
  const tasks = await getPendingTasks();
  const plan = await askOrchestratorForPlan(tasks);
  
  // GPT B（Claude Code マネージャー）にプロンプト生成を依頼
  const prompts = await askCodeManagerForPrompts(plan);
  
  // 実行計画を保存
  await savePlan(plan, prompts);
});

// 毎日9時: 人間への朝報
schedule.scheduleJob('0 9 * * *', async () => {
  const plan = await loadTodaysPlan();
  const needsApproval = plan.tasks.filter(t => t.requiresHumanApproval);
  
  if (needsApproval.length > 0) {
    // 判断が必要
    await notifyHuman(plan, needsApproval);
  } else {
    // 情報共有のみ
    await informHuman(plan);
  }
});

// 毎日10時: Claude Code 実行開始
schedule.scheduleJob('0 10 * * *', async () => {
  const plan = await loadTodaysPlan();
  const approved = await checkHumanApproval(plan);
  
  if (approved || plan.autoExecutable) {
    await executeClaude CodeInstances(plan);
  } else {
    await notifyHuman('Waiting for approval...');
  }
});

// 毎日18時: 夕方報告
schedule.scheduleJob('0 18 * * *', async () => {
  const progress = await getProgressReport();
  await sendProgressToHuman(progress);
});

// リアルタイム監視
setInterval(async () => {
  const status = await monitorClaudeCodeInstances();
  
  if (status.hasErrors) {
    await handleErrors(status.errors);
  }
  
  if (status.hasBlockers) {
    await escalateToHuman(status.blockers);
  }
}, 5 * 60 * 1000); // 5分ごと

console.log('Auto-PDCA system started');
```

#### Web ダッシュボード（オプション）

**簡易ダッシュボード（React）:**
```jsx
// dashboard/App.jsx
import React, { useState, useEffect } from 'react';

function Dashboard() {
  const [status, setStatus] = useState({});
  
  useEffect(() => {
    // WebSocket または polling で状態取得
    const interval = setInterval(async () => {
      const data = await fetch('/api/status').then(r => r.json());
      setStatus(data);
    }, 10000);
    
    return () => clearInterval(interval);
  }, []);
  
  return (
    <div className="dashboard">
      <h1>AI開発チーム ダッシュボード</h1>
      
      <section className="progress">
        <h2>本日の進捗</h2>
        <ProgressBar value={status.progressPercentage} />
        <p>{status.completedTasks} / {status.totalTasks} タスク完了</p>
      </section>
      
      <section className="instances">
        <h2>Claude Code インスタンス</h2>
        {status.instances?.map(instance => (
          <InstanceCard key={instance.id} instance={instance} />
        ))}
      </section>
      
      <section className="quality">
        <h2>品質メトリクス</h2>
        <MetricsChart data={status.quality} />
      </section>
      
      <section className="alerts">
        <h2>要対応事項</h2>
        {status.needsAttention?.map(alert => (
          <Alert key={alert.id} alert={alert} />
        ))}
      </section>
    </div>
  );
}

function ProgressBar({ value }) {
  return (
    <div className="progress-bar">
      <div 
        className="progress-fill" 
        style={{ width: `${value}%` }}
      />
      <span>{value}%</span>
    </div>
  );
}

function InstanceCard({ instance }) {
  return (
    <div className={`instance-card ${instance.status}`}>
      <h3>{instance.name}</h3>
      <p>Status: {instance.status}</p>
      <p>Task: {instance.currentTask}</p>
      <p>Progress: {instance.progress}%</p>
    </div>
  );
}

export default Dashboard;
```

---

## トラブルシューティング

### 問題1: Claude Code が期待通りに動作しない

**症状:**
- 指示を誤解する
- 不完全な実装
- エラーが多発

**対策:**
1. プロンプトをより具体的に
   - 曖昧な表現を避ける
   - ステップを細分化
   - 完了基準を明確に

2. 4段階ワークフローを強制
   - リサーチ → プランニング → 実装 → 仕上げ
   - 各ステップで確認を挟む

3. コンテキストを増やす
   - プロジェクト概要を明示
   - 既存のパターンを参照
   - 制約条件を列挙

### 問題2: GPTsの判断が不適切

**症状:**
- 優先度付けがおかしい
- エスカレーションのタイミングが悪い

**対策:**
1. 初期設定を見直す
   - プロジェクト固有の情報を追加
   - 優先度基準を明確化
   - 判断基準の具体例を提供

2. フィードバックループ
   - 誤った判断を記録
   - プロンプトを改善
   - 再評価して効果確認

### 問題3: 自動化が複雑すぎる

**症状:**
- 管理が大変
- デバッグが困難
- コストが高い

**対策:**
1. 段階的に導入
   - 最初は手動運用
   - 徐々に自動化を増やす
   - 効果を確認しながら拡大

2. シンプルに保つ
   - 過度な最適化は避ける
   - 必要最小限の機能から
   - ドキュメントを充実

---

## コスト管理

### API使用量の見積もり

**Claude Code:**
```
想定使用量:
- 小タスク: 100-500トークン
- 中タスク: 500-2000トークン
- 大タスク: 2000-5000トークン

日次使用量（3インスタンス、各3タスク）:
約 15,000-30,000 トークン

月次コスト見積もり:
Claude Sonnet 4.5: 約 $XX-$YY
```

**GPTs（ChatGPT-5）:**
```
想定使用量:
- 日次計画立案: 500-1000トークン
- プロンプト生成: 300-800トークン × 3タスク
- 品質評価: 500-1500トークン × 3タスク

月次コスト見積もり:
Plus/Team プラン: $20-$60/月
```

### コスト最適化のヒント

1. **キャッシング活用**
   - 頻繁に使用するコンテキストをキャッシュ
   - プロジェクト概要、品質基準など

2. **バッチ処理**
   - 小さなタスクをまとめて実行
   - 並列実行で時間短縮

3. **段階的実行**
   - 一度に大量のタスクを実行しない
   - 結果を確認しながら次へ

---

## 成功のためのベストプラクティス

### 1. 小さく始める
- 最初は1つのGPTと1つのClaude Codeインスタンスから
- 成功体験を積んでから拡大

### 2. ドキュメントを充実させる
- プロジェクト概要
- コーディング規約
- 品質基準
- 判断基準

### 3. フィードバックループを回す
- 毎日の振り返り
- 週次の改善
- プロンプトの継続的最適化

### 4. 人間の役割を明確に
- AIに任せるもの
- 人間が判断するもの
- 境界線を明確に

### 5. 透明性を保つ
- すべての判断を記録
- いつでも履歴を確認可能
- 人間がオーバーライド可能

---

## 次のステップ

1. **今すぐ実行:**
   - Claude Code をインストール
   - 3つのGPTsを作成
   - 小さなタスクで試験

2. **1週間以内:**
   - 日次レポートの自動化
   - 基本的なワークフローの確立
   - チーム内での共有

3. **1ヶ月以内:**
   - 完全自動PDCAサイクル
   - 複数インスタンスの並列実行
   - 品質保証プロセスの自動化

4. **継続的に:**
   - プロンプトの最適化
   - プロセスの改善
   - 新しい自動化の追加

---

**重要:** このシステムは「人間を楽にする」ためのものです。
完璧を目指すより、まず動かして、徐々に改善していきましょう。

質問や問題があれば、いつでも3つのGPTsに相談できます。
あなたの開発チームとして、常にサポートします。
